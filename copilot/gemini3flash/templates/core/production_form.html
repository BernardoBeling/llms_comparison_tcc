{% extends 'base.html' %}
{% block content %}
<div class="card" style="max-width: 600px; margin: 0 auto;">
    <h2>Cadastro de Produção</h2>
    <form method="post">
        {% csrf_token %}
        <div class="form-group">
            <label>{{ form.description.label }}</label>
            {{ form.description }}
            {{ form.description.errors }}
        </div>
        <div class="form-group" style="margin-top: 1rem;">
            <label>{{ form.quantity.label }}</label>
            {{ form.quantity }}
            {{ form.quantity.errors }}
        </div>
        
        <div class="form-group" style="margin-top: 1rem;">
            <label><strong>{{ form.machines.label }}</strong></label>
            <div style="margin-top: 0.5rem; max-height: 200px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; border-radius: 4px;">
                {{ form.machines }}
            </div>
            {{ form.machines.errors }}
            {% if not form.machines.queryset %}
                <p style="color: var(--danger); font-size: 0.8rem;">Nenhuma máquina disponível. Verifique se suas máquinas estão em outras produções ou se já cadastrou alguma.</p>
            {% endif %}
        </div>

        <div style="margin-top: 2rem;">
            <button type="submit" class="btn btn-primary">Criar Produção</button>
            <a href="{% url 'home' %}" class="btn" style="background: #ccc;">Voltar</a>
        </div>
    </form>
</div>

<style>
    .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
    .form-group input { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
    ul { list-style: none; padding: 0; }
    li label { display: flex; align-items: center; gap: 10px; padding: 5px 0; cursor: pointer; }
    li label input { width: auto; }
</style>
{% endblock %}
